import*as dom from"../../dom.js";import{isMacintosh}from"../../../common/platform.js";import"./aria.css";const MAX_MESSAGE_LENGTH=2e4;let ariaContainer,alertContainer,alertContainer2,statusContainer,statusContainer2;export function setARIAContainer(t){ariaContainer=document.createElement("div"),ariaContainer.className="monaco-aria-container";const e=()=>{const t=document.createElement("div");return t.className="monaco-alert",t.setAttribute("role","alert"),t.setAttribute("aria-atomic","true"),ariaContainer.appendChild(t),t};alertContainer=e(),alertContainer2=e();const a=()=>{const t=document.createElement("div");return t.className="monaco-status",t.setAttribute("role","complementary"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),ariaContainer.appendChild(t),t};statusContainer=a(),statusContainer2=a(),t.appendChild(ariaContainer)}export function alert(t){ariaContainer&&(alertContainer.textContent!==t?(dom.clearNode(alertContainer2),insertMessage(alertContainer,t)):(dom.clearNode(alertContainer),insertMessage(alertContainer2,t)))}export function status(t){ariaContainer&&(isMacintosh?alert(t):statusContainer.textContent!==t?(dom.clearNode(statusContainer2),insertMessage(statusContainer,t)):(dom.clearNode(statusContainer),insertMessage(statusContainer2,t)))}function insertMessage(t,e){dom.clearNode(t),e.length>2e4&&(e=e.substr(0,2e4)),t.textContent=e,t.style.visibility="hidden",t.style.visibility="visible"}