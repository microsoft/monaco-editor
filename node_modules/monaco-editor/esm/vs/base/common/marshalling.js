import{VSBuffer}from"./buffer.js";import{URI}from"./uri.js";export function parse(e){let r=JSON.parse(e);return r=revive(r),r}export function revive(e,r=0){if(!e||r>200)return e;if("object"==typeof e){switch(e.$mid){case 1:return URI.revive(e);case 2:return new RegExp(e.source,e.flags);case 16:return new Date(e.source)}if(e instanceof VSBuffer||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let t=0;t<e.length;++t)e[t]=revive(e[t],r+1);else for(const t in e)Object.hasOwnProperty.call(e,t)&&(e[t]=revive(e[t],r+1))}return e}