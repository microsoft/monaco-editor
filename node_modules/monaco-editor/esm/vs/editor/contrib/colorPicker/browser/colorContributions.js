import{Disposable}from"../../../../base/common/lifecycle.js";import{registerEditorContribution}from"../../../browser/editorExtensions.js";import{Range}from"../../../common/core/range.js";import{ColorDecorationInjectedTextMarker}from"./colorDetector.js";import{ColorHoverParticipant}from"./colorHoverParticipant.js";import{ModesHoverController}from"../../hover/browser/hover.js";import{HoverParticipantRegistry}from"../../hover/browser/hoverTypes.js";class ColorContribution extends Disposable{constructor(o){super(),this._editor=o,this._register(o.onMouseDown((o=>this.onMouseDown(o))))}dispose(){super.dispose()}onMouseDown(o){const r=o.target;if(6!==r.type)return;if(!r.detail.injectedText)return;if(r.detail.injectedText.options.attachedData!==ColorDecorationInjectedTextMarker)return;if(!r.range)return;const e=this._editor.getContribution(ModesHoverController.ID);if(e&&!e.isColorPickerVisible()){const o=new Range(r.range.startLineNumber,r.range.startColumn+1,r.range.endLineNumber,r.range.endColumn+1);e.showContentHover(o,1,0,!1)}}}ColorContribution.ID="editor.contrib.colorContribution";export{ColorContribution};registerEditorContribution(ColorContribution.ID,ColorContribution,2),HoverParticipantRegistry.register(ColorHoverParticipant);